import{K as A,r as l,j as e,L as U,S as i}from"./app-0c5FR7Uu.js";import{u as c,T as L,m as u,a as x,b as g,D as I}from"./Table-BRf1uxgN.js";import{A as P}from"./AuthenticatedLayout-sA9Bkon0.js";import{w as z}from"./MagnifyingGlass-DH5TKwAo.js";import{P as T}from"./PencilSimple-8sX1kDpV.js";import{I as $,a as R}from"./Trash-C7j0W3Ta.js";import F from"./Create-3CRSut0X.js";import H from"./Edit-D3SjSoG_.js";import{i as K}from"./chunk-HJTJQZF3-pEocXB3-.js";import{b as M}from"./chunk-KCYYJJH4-BrXOhzVf.js";import{c as q}from"./chunk-J7I6W5JF-1440FkIJ.js";import"./chunk-SLABUSGS-B3_7zFLl.js";import"./index-D7ldAl5x.js";import"./useDialog-DDVQ5bQn.js";import"./useFocusRing-CD4N2T_R.js";import"./index-CokAva9Y.js";import"./useMenuTriggerState-DwpXiAit.js";import"./chunk-OTWYT2HS-DPE-1s8j.js";import"./chunk-7JXO3E7I-CVG-wxOq.js";import"./chunk-XPO5AVRM-DPbOQERC.js";import"./chunk-K6DFORPN-BZFrrvwL.js";function pe(){const{users:s,filters:n,auth:d}=A().props,{isOpen:f,onOpen:j,onOpenChange:m}=c(),{isOpen:v,onOpen:y,onOpenChange:p}=c(),{isOpen:b,onOpen:C,onOpenChange:h}=c(),[t,o]=l.useState(null),[r,w]=l.useState((n==null?void 0:n.search)||""),N=l.useMemo(()=>r?s.data.filter(a=>a.name.toLowerCase().includes(r.toLowerCase())||a.email.toLowerCase().includes(r.toLowerCase())):s.data,[s.data,r]),O=a=>{o(a),y()},k=a=>{o(a),C()},_=()=>{t&&i.delete(route("users.destroy",t.id),{onSuccess:()=>{h(),o(null)}})},S=[{header:"Nama",value:a=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 overflow-hidden rounded-full bg-gray-100 dark:bg-gray-700",children:e.jsx("img",{src:`https://ui-avatars.com/api/?name=${a.name||"User"}&background=random`,alt:a.name||"User",className:"h-full w-full object-cover"})}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a.name||"N/A"})]})},{header:"Email",value:a=>e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.email||"N/A"})},{header:"Role",value:a=>a.is_admin===1&&e.jsx(q,{color:"primary",children:"Admin"})},{header:"Aksi",value:a=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(a),className:"cursor-pointer rounded-lg p-2 text-yellow-400 transition-colors hover:bg-yellow-400 hover:text-white",children:e.jsx(T,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>k(a),className:"cursor-pointer rounded-lg p-2 text-red-600 transition-colors hover:bg-red-600 hover:text-white",children:e.jsx(R,{className:"h-4 w-4"})})]})}],D=a=>{w(a.target.value),i.get(route("users.index"),{search:a.target.value},{preserveState:!0,replace:!0})},E=a=>{i.get(route("users.index"),{page:a},{preserveState:!0,replace:!0})};return e.jsxs(P,{children:[e.jsx(U,{title:"Users"}),e.jsxs("div",{className:"p-4 lg:p-8 dark:bg-gray-900",children:[e.jsx("h2",{className:"mb-5 text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Pengguna"}),e.jsx("div",{className:"mb-6 flex flex-col items-center gap-4 lg:flex-row lg:items-center lg:justify-between",children:e.jsxs("div",{className:"flex w-full flex-col gap-4 lg:flex-row lg:items-center lg:justify-end",children:[e.jsx("div",{className:"relative w-full lg:w-auto",children:e.jsx(K,{startContent:e.jsx(z,{className:"h-4 w-4 text-gray-500"}),type:"text",placeholder:"Cari pengguna...",value:r,onChange:D,color:"default",variant:"bordered",radius:"md"})}),d.user.is_admin===1&&e.jsxs(M,{onPress:j,color:"primary",children:[e.jsx($,{className:"h-5 w-5"}),"Tambah Pengguna"]})]})}),e.jsx(L,{data:N,column:S,pagination:{...s,last_page:s.last_page,current_page:s.current_page,onChange:E}}),d.user.is_admin===1&&e.jsxs(e.Fragment,{children:[e.jsx(u,{isOpen:f,onOpenChange:m,size:"sm",children:e.jsx("div",{className:"fixed inset-0 z-50 flex h-screen min-h-screen items-center justify-center overflow-y-auto bg-black/30",children:e.jsxs(x,{className:"relative rounded-2xl bg-white p-0 dark:bg-gray-900",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Tambah User"})}),e.jsx(F,{onClose:()=>m()})]})})}),e.jsx(u,{isOpen:v,onOpenChange:p,size:"sm",children:e.jsx("div",{className:"fixed inset-0 z-50 flex h-screen min-h-screen items-center justify-center overflow-y-auto bg-black/30",children:e.jsxs(x,{className:"relative rounded-2xl bg-white p-0 dark:bg-gray-900",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Edit User"})}),t&&e.jsx(H,{user:t,onClose:()=>p()})]})})}),e.jsx(I,{isOpen:b,onClose:h,onConfirm:_,title:"Hapus User",description:`Apakah Anda yakin ingin menghapus data ${t==null?void 0:t.name}?`})]})]})]})}export{pe as default};
