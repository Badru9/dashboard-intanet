import{m as f,j as e,S as j}from"./app-0c5FR7Uu.js";import{s as u,l as _}from"./chunk-7JXO3E7I-CVG-wxOq.js";import{i}from"./chunk-HJTJQZF3-pEocXB3-.js";import{t as v}from"./chunk-ORPGD37S-B3-0A5tV.js";import{b as h}from"./chunk-KCYYJJH4-BrXOhzVf.js";import"./useMenuTriggerState-DwpXiAit.js";import"./useDialog-DDVQ5bQn.js";import"./chunk-SLABUSGS-B3_7zFLl.js";import"./useFocusRing-CD4N2T_R.js";import"./chunk-XPO5AVRM-DPbOQERC.js";import"./chunk-K6DFORPN-BZFrrvwL.js";function w({onClose:n,users:d}){console.log("create attendance users prop:",d);const{data:r,setData:l,processing:x,errors:a,reset:k}=f({user_id:"",date:"",check_in_time:"",check_out_time:"",break_start_time:"",break_end_time:"",status:"",notes:"",location_check_in:"",location_check_out:"",photo_check_in:null,photo_check_out:null}),b=[{key:"PRESENT",label:"Hadir"},{key:"ABSENT",label:"Tidak Hadir"},{key:"LEAVE",label:"Cuti"},{key:"SICK",label:"Sakit"},{key:"HALF_DAY",label:"Setengah Hari"},{key:"LATE",label:"Terlambat"}],g=d.map(t=>({key:String(t.id),label:t.name})),p=t=>{t.preventDefault();const s=(o,m)=>!o||!m?"":`${o} ${m}:00`,c={...r,check_in_time:s(r.date,r.check_in_time),check_out_time:r.check_out_time?s(r.date,r.check_out_time):null,break_start_time:r.break_start_time?s(r.date,r.break_start_time):null,break_end_time:r.break_end_time?s(r.date,r.break_end_time):null};console.log("Payload yang akan dikirim:",c),j.post(route("attendances.store"),c,{onSuccess:()=>{k(),n()},onError:o=>{console.error("Form Errors:",o)},forceFormData:!0})};return e.jsx("div",{className:"mx-auto mt-5 max-h-[75vh] w-full overflow-y-auto rounded-2xl bg-white text-slate-800 dark:bg-gray-900 dark:text-gray-100",children:e.jsxs("form",{onSubmit:p,className:"space-y-6 px-5 pb-5",children:[e.jsxs("div",{children:[e.jsx(u,{label:"Pilih Pengguna",selectedKeys:r.user_id?[String(r.user_id)]:[],onSelectionChange:t=>l("user_id",Array.from(t)[0]),placeholder:"Pilih pengguna",color:a.user_id?"danger":"default",variant:"bordered",radius:"md",isRequired:!0,children:g.map(t=>e.jsx(_,{textValue:t.label,children:t.label},t.key))}),a.user_id&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.user_id})]}),e.jsxs("div",{children:[e.jsx(i,{type:"date",label:"Tanggal Presensi",value:r.date,onChange:t=>l("date",t.target.value),color:a.date?"danger":"default",variant:"bordered",radius:"md",isRequired:!0}),a.date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.date})]}),e.jsxs("div",{children:[e.jsx(i,{type:"time",label:"Waktu Masuk",value:r.check_in_time,onChange:t=>l("check_in_time",t.target.value),color:a.check_in_time?"danger":"default",variant:"bordered",radius:"md",isRequired:!0}),a.check_in_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.check_in_time})]}),e.jsxs("div",{children:[e.jsx(i,{type:"time",label:"Waktu Pulang (Opsional)",value:r.check_out_time||"",onChange:t=>l("check_out_time",t.target.value),color:a.check_out_time?"danger":"default",variant:"bordered",radius:"md"}),a.check_out_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.check_out_time})]}),e.jsxs("div",{children:[e.jsx(i,{type:"time",label:"Mulai Istirahat (Opsional)",value:r.break_start_time||"",onChange:t=>l("break_start_time",t.target.value),color:a.break_start_time?"danger":"default",variant:"bordered",radius:"md"}),a.break_start_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.break_start_time})]}),e.jsxs("div",{children:[e.jsx(i,{type:"time",label:"Selesai Istirahat (Opsional)",value:r.break_end_time||"",onChange:t=>l("break_end_time",t.target.value),color:a.break_end_time?"danger":"default",variant:"bordered",radius:"md"}),a.break_end_time&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.break_end_time})]}),e.jsxs("div",{children:[e.jsx(u,{label:"Status Presensi",selectedKeys:r.status?[r.status]:[],onSelectionChange:t=>l("status",Array.from(t)[0]),placeholder:"Pilih status",color:a.status?"danger":"default",variant:"bordered",radius:"md",isRequired:!0,children:b.map(t=>e.jsx(_,{textValue:t.label,children:t.label},t.key))}),a.status&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.status})]}),e.jsxs("div",{children:[e.jsx(v,{label:"Catatan (Opsional)",value:r.notes||"",onChange:t=>l("notes",t.target.value),color:a.notes?"danger":"default",variant:"bordered",radius:"md"}),a.notes&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.notes})]}),e.jsxs("div",{children:[e.jsx(i,{type:"text",label:"Lokasi Masuk (Opsional)",value:r.location_check_in||"",onChange:t=>l("location_check_in",t.target.value),color:a.location_check_in?"danger":"default",variant:"bordered",radius:"md"}),a.location_check_in&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.location_check_in})]}),e.jsxs("div",{children:[e.jsx(i,{type:"text",label:"Lokasi Pulang (Opsional)",value:r.location_check_out||"",onChange:t=>l("location_check_out",t.target.value),color:a.location_check_out?"danger":"default",variant:"bordered",radius:"md"}),a.location_check_out&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.location_check_out})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Foto Masuk (Opsional)"}),e.jsx("input",{type:"file",onChange:t=>l("photo_check_in",t.target.files?t.target.files[0]:null),className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-200 dark:hover:file:bg-gray-600"}),a.photo_check_in&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.photo_check_in})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Foto Pulang (Opsional)"}),e.jsx("input",{type:"file",onChange:t=>l("photo_check_out",t.target.files?t.target.files[0]:null),className:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-gray-700 dark:file:text-gray-200 dark:hover:file:bg-gray-600"}),a.photo_check_out&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.photo_check_out})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(h,{variant:"flat",onPress:n,children:"Batal"}),e.jsx(h,{type:"submit",color:"primary",isLoading:x,children:"Simpan Presensi"})]})]})})}export{w as default};
