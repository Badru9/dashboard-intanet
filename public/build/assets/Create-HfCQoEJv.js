import{K as f,m as y,j as a,S as N,n as h}from"./app-Bvxdc6d4.js";import{B as S,a as C}from"./constants-Cxi3XqCn.js";import{c as x}from"./utils-dFnXFjxy.js";import{i as d}from"./chunk-HJTJQZF3-DHlmav6e.js";import{t as I}from"./chunk-ORPGD37S-DhA52hmi.js";import{K as k}from"./chunk-4SMPYVK4-CdNnZA8Z.js";import{s as n,l as c}from"./chunk-7JXO3E7I-B6Z0BSsU.js";import{b as v}from"./chunk-KCYYJJH4-DlcP0Khl.js";/* empty css            */import"./chunk-K6DFORPN-Wo6Y1QXR.js";import"./chunk-SLABUSGS-BJzgDJw4.js";import"./useFocusRing-Tguq4vMu.js";import"./useDialog-BatGcOah.js";import"./VisuallyHidden-CnFoNxsa.js";import"./index-CokAva9Y.js";import"./features-animation-WuPvb1gZ.js";import"./useMenuTriggerState-Dz6-bjLW.js";function H({onClose:g}){var u,p;const{packages:o}=f().props,{data:t,setData:i,processing:m,errors:s,setError:r,clearErrors:_}=y({name:"",customer_id:"",status:"online",address:"",npwp:"",package_id:"",coordinates:{latitude:"",longitude:""},phone:"",join_date:null,bill_date:"",email:""}),j=e=>{e.preventDefault(),_(),t.name||r("name","Nama harus diisi"),t.phone||r("phone","No. Telepon harus diisi"),t.package_id||r("package_id","Paket harus dipilih"),t.address||r("address","Alamat harus diisi"),t.status||r("status","Status harus dipilih"),t.join_date||r("join_date","Tanggal bergabung harus diisi"),t.bill_date||r("bill_date","Tanggal tagihan harus diisi");const l={...t,join_date:t.join_date?`${t.join_date.year}-${String(t.join_date.month).padStart(2,"0")}-${String(t.join_date.day).padStart(2,"0")}`:null};console.log(l),N.post(route("customers.store"),l,{onSuccess:()=>{g(),h({title:"Success",description:"Customer berhasil ditambahkan",color:"success"}),console.log("success")},onError:b=>{h({title:"Error",description:"Customer gagal ditambahkan",color:"danger"}),console.log("error",b)}})};return a.jsx("div",{className:"mx-auto mt-5 max-h-[75vh] w-full overflow-y-auto rounded-2xl bg-white text-slate-800 dark:bg-gray-900 dark:text-gray-100",children:a.jsxs("form",{onSubmit:j,className:"space-y-6 px-5 pb-5",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Data Diri"})}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsx(d,{label:"Nama Customer",type:"text",id:"name",value:t.name,onChange:e=>i("name",e.target.value),isInvalid:!!s.name,errorMessage:s.name}),a.jsx(d,{label:"Email",type:"email",id:"email",value:t.email,onChange:e=>i("email",e.target.value),placeholder:"opsional",isInvalid:!!s.email,errorMessage:s.email}),a.jsx(d,{label:"ID Pelanggan",type:"text",id:"customer_id",value:t.customer_id,onChange:e=>i("customer_id",e.target.value),isInvalid:!!s.customer_id,errorMessage:s.customer_id}),a.jsx(d,{label:"No. NPWP / NIK",type:"text",id:"tax_number",value:t.npwp,onChange:e=>i("npwp",e.target.value),isInvalid:!!s.npwp,errorMessage:s.npwp}),a.jsx(d,{label:"No. Telepon",type:"text",id:"phone",value:t.phone,onChange:e=>i("phone",e.target.value),isInvalid:!!s.phone,errorMessage:s.phone})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Alamat"})}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsx(I,{label:"Alamat",id:"address",value:t.address,onChange:e=>i("address",e.target.value),rows:3,isInvalid:!!s.address,errorMessage:s.address}),a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsx(d,{label:"Latitude",type:"text",id:"latitude",placeholder:"opsional",value:(u=t.coordinates)==null?void 0:u.latitude,onChange:e=>{var l;return i("coordinates",{latitude:e.target.value,longitude:((l=t.coordinates)==null?void 0:l.longitude)||""})},isInvalid:!!s["coordinates.latitude"],errorMessage:s["coordinates.latitude"]}),a.jsx(d,{label:"Longitude",type:"text",id:"longitude",placeholder:"opsional",value:(p=t.coordinates)==null?void 0:p.longitude,onChange:e=>{var l;return i("coordinates",{latitude:((l=t.coordinates)==null?void 0:l.latitude)||"",longitude:e.target.value})},isInvalid:!!s["coordinates.longitude"],errorMessage:s["coordinates.longitude"]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Langganan"})}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[a.jsx(k,{label:"Tanggal Berlangganan",id:"join_date",value:t.join_date,onChange:e=>i("join_date",e),isInvalid:!!s.join_date,errorMessage:s.join_date,selectorButtonPlacement:"start"}),a.jsx(n,{label:"Tanggal Tagihan",id:"bill_date",value:t.bill_date,onChange:e=>i("bill_date",e.target.value),isInvalid:!!s.bill_date,errorMessage:s.bill_date,placeholder:"Pilih Tanggal",selectedKeys:t.bill_date?[t.bill_date]:[],children:Array.from({length:S},(e,l)=>l+1).map(e=>a.jsx(c,{textValue:e.toString(),children:e},e.toString()))}),a.jsx("p",{className:"ml-2 mt-2 text-xs text-red-500",children:"* Setiap bulan"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(n,{label:"Paket",id:"package_id",value:t.package_id,onChange:e=>i("package_id",e.target.value),isInvalid:!!s.package_id,errorMessage:s.package_id,placeholder:"Pilih Paket",selectedKeys:t.package_id,children:o==null?void 0:o.map(e=>a.jsxs(c,{textValue:e.name+" - "+x(e.price),children:[e.name," - ",x(e.price)]},e.id))}),a.jsx(n,{label:"Status",id:"status",value:t.status,onChange:e=>i("status",e.target.value),isInvalid:!!s.status,errorMessage:s.status,selectedKeys:[t.status],children:C.map(e=>a.jsx(c,{children:e.label},e.value))})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 border-t border-gray-200 pt-4",children:[a.jsx(v,{onPress:g,color:"default",children:"Batal"}),a.jsx(v,{type:"submit",disabled:m,color:"primary",children:m?"Menyimpan...":"Simpan"})]})]})})}export{H as default};
