import{K as Y,r as m,j as e,L as M,S as i,h as u}from"./app-0c5FR7Uu.js";import{u as h,T as z,m as f,a as y,b as j,D as K}from"./Table-BRf1uxgN.js";import{A as R}from"./AuthenticatedLayout-sA9Bkon0.js";import{w as V}from"./MagnifyingGlass-DH5TKwAo.js";import{P as B}from"./PencilSimple-8sX1kDpV.js";import{I as W,a as $}from"./Trash-C7j0W3Ta.js";import U from"./Create-BpqKU39C.js";import{c as q}from"./chunk-J7I6W5JF-1440FkIJ.js";import{i as G}from"./chunk-HJTJQZF3-pEocXB3-.js";import{s as J,l as Q}from"./chunk-7JXO3E7I-CVG-wxOq.js";import{b as X}from"./chunk-KCYYJJH4-BrXOhzVf.js";import"./chunk-SLABUSGS-B3_7zFLl.js";import"./index-D7ldAl5x.js";import"./useDialog-DDVQ5bQn.js";import"./useFocusRing-CD4N2T_R.js";import"./index-CokAva9Y.js";import"./useMenuTriggerState-DwpXiAit.js";import"./chunk-OTWYT2HS-DPE-1s8j.js";import"./chunk-ORPGD37S-B3-0A5tV.js";import"./chunk-K6DFORPN-BZFrrvwL.js";import"./chunk-XPO5AVRM-DPbOQERC.js";function ke(){const{attendances:l,users:k,filters:s,auth:x}=Y().props;console.log(l);const{isOpen:b,onOpen:p,onOpenChange:N}=h(),{isOpen:S,onOpen:v,onOpenChange:C}=h(),{isOpen:_,onOpen:w,onOpenChange:g}=h(),[n,o]=m.useState(null),[c,A]=m.useState((s==null?void 0:s.search)||""),[d,O]=m.useState((s==null?void 0:s.status)||"all"),E=[{key:"all",label:"Semua Status"},{key:"PRESENT",label:"Hadir"},{key:"ABSENT",label:"Tidak Hadir"},{key:"LEAVE",label:"Cuti"},{key:"SICK",label:"Sakit"},{key:"HALF_DAY",label:"Setengah Hari"},{key:"LATE",label:"Terlambat"}],D=a=>{o(a),v()},T=a=>{o(a),w()},P=()=>{n&&i.delete(route("attendances.destroy",n.id),{onSuccess:()=>{g(),o(null)}})},H=[{header:"Nama",value:a=>{var t;return e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:((t=a.user)==null?void 0:t.name)||"N/A"})}},{header:"No HP",value:a=>{var t;return e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:((t=a.user)==null?void 0:t.phone)||"N/A"})}},{header:"Email",value:a=>{var t;return e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:((t=a.user)==null?void 0:t.email)||"N/A"})}},{header:"Tanggal",value:a=>e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:u(a.date).format("DD MMMM YYYY")||"N/A"})},{header:"Waktu Masuk",value:a=>e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.check_in_time?u.utc(a.check_in_time).format("HH:mm"):"N/A"})},{header:"Waktu Pulang",value:a=>e.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:a.check_out_time?u.utc(a.check_out_time).format("HH:mm"):"N/A"})},{header:"Status",value:a=>{let t,r;switch(a.status){case"PRESENT":t="success",r="Hadir";break;case"LEAVE":t="warning",r="Cuti";break;case"SICK":t="secondary",r="Sakit";break;case"ABSENT":t="danger",r="Tidak Hadir";break;case"HALF_DAY":t="primary",r="Setengah Hari";break;case"LATE":t="danger",r="Terlambat";break;default:t="default",r="Tidak Diketahui"}return e.jsx(q,{color:t,children:r})}},{header:"Catatan",value:a=>e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a.notes||"-"})},{header:"Aksi",value:a=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(a),className:"cursor-pointer rounded-lg p-2 text-yellow-400 transition-colors hover:bg-yellow-400 hover:text-white",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(a),className:"cursor-pointer rounded-lg p-2 text-red-600 transition-colors hover:bg-red-600 hover:text-white",children:e.jsx($,{className:"h-4 w-4"})})]})}],L=a=>{const t=a.target.value;A(t),i.get(route("attendances.index"),{...s,search:t,status:d},{preserveState:!0,replace:!0})},F=a=>{const t=String(a);O(t),i.get(route("attendances.index"),{...s,search:c,status:t},{preserveState:!0,replace:!0})},I=a=>{i.get(route("attendances.index"),{...s,page:a,search:c,status:d},{preserveState:!0,replace:!0})};return e.jsxs(R,{children:[e.jsx(M,{title:"Presensi"}),e.jsxs("div",{className:"p-4 lg:p-8",children:[e.jsx("h2",{className:"mb-5 text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Data Presensi"}),e.jsxs("div",{className:"mb-6 flex w-full flex-col items-center gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex w-full flex-col items-center justify-start gap-4 lg:flex-row",children:[e.jsx(G,{startContent:e.jsx(V,{className:"h-4 w-4 text-gray-500"}),type:"text",placeholder:"Cari presensi...",value:c,onChange:L,color:"default",variant:"bordered",radius:"md"}),e.jsx(J,{placeholder:"Pilih Status",selectedKeys:[d],onSelectionChange:a=>F(Array.from(a)[0]),color:"default",variant:"bordered",radius:"md",children:E.map(a=>e.jsx(Q,{textValue:a.label,children:a.label},a.key))})]}),x.user.is_admin===1&&e.jsx("div",{className:"flex w-full justify-center lg:w-1/2 lg:justify-end",children:e.jsx(X,{onPress:p,color:"primary",className:"w-full lg:w-fit",startContent:e.jsx(W,{className:"h-5 w-5"}),children:"Presensi"})})]}),e.jsx(z,{data:l.data,column:H,pagination:{...l,last_page:l.last_page,current_page:l.current_page,onChange:I}}),x.user.is_admin===1&&e.jsxs(e.Fragment,{children:[e.jsx(f,{isOpen:b,onOpenChange:N,size:"sm",children:e.jsx("div",{className:"fixed inset-0 z-50 flex h-screen min-h-screen items-center justify-center overflow-y-auto bg-black/30",children:e.jsxs(y,{className:"relative rounded-2xl bg-white p-0 dark:bg-gray-900",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Tambah Presensi"})}),e.jsx(U,{onClose:p,users:k})]})})}),e.jsx(f,{isOpen:S,onOpenChange:C,size:"sm",children:e.jsx("div",{className:"fixed inset-0 z-50 flex h-screen min-h-screen items-center justify-center overflow-y-auto bg-black/30",children:e.jsxs(y,{className:"relative rounded-2xl bg-white p-0 dark:bg-gray-900",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Edit Presensi"})}),n&&e.jsxs("div",{className:"p-4",children:["Form Edit Presensi Untuk ID: ",n.id," Akan Ada Di Sini"]})]})})}),e.jsx(K,{isOpen:_,onClose:g,onConfirm:P,title:"Hapus Presensi",description:`Apakah Anda yakin ingin menghapus data presensi tanggal ${n==null?void 0:n.date}?`})]})]})]})}export{ke as default};
