import{e as P,r as s,am as E,k as _,t as N,U as q,af as Q,B as w,i as R,j as S}from"./app-Bvxdc6d4.js";function W(...e){return e.length===1&&e[0]?e[0]:a=>{for(let t of e)typeof t=="function"?t(a):t!=null&&(t.current=a)}}function G(e,a){let{id:t,"aria-label":i,"aria-labelledby":l}=e;return t=P(t),l&&i?l=[...new Set([t,...l.trim().split(/\s+/)])].join(" "):l&&(l=l.trim().split(/\s+/).join(" ")),!i&&!l&&a&&(i=a),{id:t,"aria-label":i,"aria-labelledby":l}}function K(e){const a=s.useRef(null);return s.useMemo(()=>({get current(){return a.current},set current(t){a.current=t,typeof e=="function"?e(t):e&&(e.current=t)}}),[e])}function ne(e,a,t){let i=s.useRef(a),l=E(()=>{t&&t(i.current)});s.useEffect(()=>{var r;let n=e==null||(r=e.current)===null||r===void 0?void 0:r.form;return n==null||n.addEventListener("reset",l),()=>{n==null||n.removeEventListener("reset",l)}},[e,l])}function oe(e,a,t){let[i,l]=s.useState(e||a),r=s.useRef(e!==void 0),n=e!==void 0;s.useEffect(()=>{let u=r.current;u!==n&&console.warn(`WARN: A component changed from ${u?"controlled":"uncontrolled"} to ${n?"controlled":"uncontrolled"}.`),r.current=n},[n]);let o=n?e:i,d=s.useCallback((u,...c)=>{let v=(b,...m)=>{t&&(Object.is(o,b)||t(b,...m)),n||(o=b)};typeof u=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),l((m,...p)=>{let $=u(n?o:m,...p);return v($,...c),n?m:$})):(n||l(u),v(u,...c))},[n,o,t]);return[o,d]}function se(e){const a=_(),t=a==null?void 0:a.labelPlacement;return s.useMemo(()=>{var i,l;const r=(l=(i=e.labelPlacement)!=null?i:t)!=null?l:"inside";return r==="inside"&&!e.label?"outside":r},[e.labelPlacement,t,e.label])}var Y=N({base:"flex flex-col gap-2 items-start"}),de=globalThis!=null&&globalThis.document?s.useLayoutEffect:s.useEffect;const C={badInput:!1,customError:!1,patternMismatch:!1,rangeOverflow:!1,rangeUnderflow:!1,stepMismatch:!1,tooLong:!1,tooShort:!1,typeMismatch:!1,valueMissing:!1,valid:!0},T={...C,customError:!0,valid:!1},y={isInvalid:!1,validationDetails:C,validationErrors:[]},O=s.createContext({}),B="__formValidationState"+Date.now();function ue(e){if(e[B]){let{realtimeValidation:a,displayValidation:t,updateValidation:i,resetValidation:l,commitValidation:r}=e[B];return{realtimeValidation:a,displayValidation:t,updateValidation:i,resetValidation:l,commitValidation:r}}return z(e)}function z(e){let{isInvalid:a,validationState:t,name:i,value:l,builtinValidation:r,validate:n,validationBehavior:o="aria"}=e;t&&(a||(a=t==="invalid"));let d=a!==void 0?{isInvalid:a,validationErrors:[],validationDetails:T}:null,u=s.useMemo(()=>{if(!n||l==null)return null;let f=H(n,l);return D(f)},[n,l]);r!=null&&r.validationDetails.valid&&(r=void 0);let c=s.useContext(O),v=s.useMemo(()=>i?Array.isArray(i)?i.flatMap(f=>L(c[f])):L(c[i]):[],[c,i]),[b,m]=s.useState(c),[p,$]=s.useState(!1);c!==b&&(m(c),$(!1));let x=s.useMemo(()=>D(p?[]:v),[p,v]),j=s.useRef(y),[g,h]=s.useState(y),V=s.useRef(y),k=()=>{if(!U)return;I(!1);let f=u||r||j.current;M(f,V.current)||(V.current=f,h(f))},[U,I]=s.useState(!1);return s.useEffect(k),{realtimeValidation:d||x||u||r||y,displayValidation:o==="native"?d||x||g:d||x||u||r||g,updateValidation(f){o==="aria"&&!M(g,f)?h(f):j.current=f},resetValidation(){let f=y;M(f,V.current)||(V.current=f,h(f)),o==="native"&&I(!1),$(!0)},commitValidation(){o==="native"&&I(!0),$(!0)}}}function L(e){return e?Array.isArray(e)?e:[e]:[]}function H(e,a){if(typeof e=="function"){let t=e(a);if(t&&typeof t!="boolean")return L(t)}return[]}function D(e){return e.length?{isInvalid:!0,validationErrors:e,validationDetails:T}:null}function M(e,a){return e===a?!0:!!e&&!!a&&e.isInvalid===a.isInvalid&&e.validationErrors.length===a.validationErrors.length&&e.validationErrors.every((t,i)=>t===a.validationErrors[i])&&Object.entries(e.validationDetails).every(([t,i])=>a.validationDetails[t]===i)}function ce(...e){let a=new Set,t=!1,i={...C};for(let n of e){var l,r;for(let o of n.validationErrors)a.add(o);t||(t=n.isInvalid);for(let o in i)(l=i)[r=o]||(l[r]=n.validationDetails[o])}return i.valid=!t,{isInvalid:t,validationErrors:[...a],validationDetails:i}}function fe(e,a,t){let{validationBehavior:i,focus:l}=e;q(()=>{if(i==="native"&&(t!=null&&t.current)&&!t.current.disabled){let d=a.realtimeValidation.isInvalid?a.realtimeValidation.validationErrors.join(" ")||"Invalid value.":"";t.current.setCustomValidity(d),t.current.hasAttribute("title")||(t.current.title=""),a.realtimeValidation.isInvalid||a.updateValidation(X(t.current))}});let r=E(()=>{a.resetValidation()}),n=E(d=>{var u;a.displayValidation.isInvalid||a.commitValidation();let c=t==null||(u=t.current)===null||u===void 0?void 0:u.form;if(!d.defaultPrevented&&t&&c&&Z(c)===t.current){var v;l?l():(v=t.current)===null||v===void 0||v.focus(),Q("keyboard")}d.preventDefault()}),o=E(()=>{a.commitValidation()});s.useEffect(()=>{let d=t==null?void 0:t.current;if(!d)return;let u=d.form;return d.addEventListener("invalid",n),d.addEventListener("change",o),u==null||u.addEventListener("reset",r),()=>{d.removeEventListener("invalid",n),d.removeEventListener("change",o),u==null||u.removeEventListener("reset",r)}},[t,n,o,r,i])}function J(e){let a=e.validity;return{badInput:a.badInput,customError:a.customError,patternMismatch:a.patternMismatch,rangeOverflow:a.rangeOverflow,rangeUnderflow:a.rangeUnderflow,stepMismatch:a.stepMismatch,tooLong:a.tooLong,tooShort:a.tooShort,typeMismatch:a.typeMismatch,valueMissing:a.valueMissing,valid:a.valid}}function X(e){return{isInvalid:!e.validity.valid,validationDetails:J(e),validationErrors:e.validationMessage?[e.validationMessage]:[]}}function Z(e){for(let a=0;a<e.elements.length;a++){let t=e.elements[a];if(!t.validity.valid)return t}return null}function ee(e){let{id:a,label:t,"aria-labelledby":i,"aria-label":l,labelElementType:r="label"}=e;a=P(a);let n=P(),o={};t?(i=i?`${n} ${i}`:n,o={id:n,htmlFor:r==="label"?a:void 0}):!i&&!l&&console.warn("If you do not provide a visible label, you must specify an aria-label or aria-labelledby attribute for accessibility");let d=G({id:a,"aria-label":l,"aria-labelledby":i});return{labelProps:o,fieldProps:d}}function ve(e){let{description:a,errorMessage:t,isInvalid:i,validationState:l}=e,{labelProps:r,fieldProps:n}=ee(e),o=w([!!a,!!t,i,l]),d=w([!!a,!!t,i,l]);return n=R(n,{"aria-describedby":[o,d,e["aria-describedby"]].filter(Boolean).join(" ")||void 0}),{labelProps:r,fieldProps:n,descriptionProps:{id:o},errorMessageProps:{id:d}}}var A=Symbol("default");function te(e,a){let t=s.useContext(e);if(a===null)return null;if(t&&typeof t=="object"&&"slots"in t&&t.slots){let i=new Intl.ListFormat().format(Object.keys(t.slots).map(r=>`"${r}"`));if(!a&&!t.slots[A])throw new Error(`A slot prop is required. Valid slot names are ${i}.`);let l=a||A;if(!t.slots[l])throw new Error(`Invalid slot "${a}". Valid slot names are ${i}.`);return t.slots[l]}return t}function ae(e,a,t){let i=te(t,e.slot)||{},{ref:l,...r}=i,n=K(s.useMemo(()=>W(a,l),[a,l])),o=R(r,e);return"style"in r&&r.style&&"style"in e&&e.style&&(typeof r.style=="function"||typeof e.style=="function"?o.style=d=>{let u=typeof r.style=="function"?r.style(d):r.style,c={...d.defaultStyle,...u},v=typeof e.style=="function"?e.style({...d,defaultStyle:c}):e.style;return{...c,...v}}:o.style={...r.style,...e.style}),[o,n]}var F=s.createContext(null);s.forwardRef(function(a,t){[a,t]=ae(a,t,F);let{validationErrors:i,validationBehavior:l="native",children:r,className:n,...o}=a;const d=s.useMemo(()=>Y({className:n}),[n]);return S.jsx("form",{noValidate:l!=="native",...o,ref:t,className:d,children:S.jsx(F.Provider,{value:{...a,validationBehavior:l},children:S.jsx(O.Provider,{value:i??{},children:r})})})});export{oe as $,F,ve as a,y as b,B as c,ce as d,ue as e,se as f,G as g,ne as h,fe as i,C as j,W as k,de as l,ee as m,te as u};
