import{m as x,j as r,n as s}from"./app-Bvxdc6d4.js";import{i as h}from"./chunk-HJTJQZF3-DHlmav6e.js";import{b as o}from"./chunk-KCYYJJH4-DlcP0Khl.js";/* empty css            */import"./chunk-K6DFORPN-Wo6Y1QXR.js";import"./chunk-SLABUSGS-BJzgDJw4.js";import"./useFocusRing-Tguq4vMu.js";const k=({onClose:a})=>{const{data:n,setData:m,post:c,processing:p,errors:l}=x({file:null}),d=t=>{if(t.preventDefault(),!n.file){s({title:"Error",description:"Silakan pilih file terlebih dahulu",color:"danger"});return}c(route("customers.import"),{onSuccess:()=>{s({title:"Sukses",description:"File berhasil dibaca",color:"success"}),a()},onError:e=>{console.log("error",e),e.import_errors?(Array.isArray(e.import_errors)?e.import_errors:[e.import_errors]).forEach(u=>{s({title:"Import Customer Gagal",description:u,color:"danger"})}):s({title:"Error",description:e.message||"Terjadi kesalahan saat membaca file",color:"danger"})}})},f=()=>{window.open("/template/template_customers.xlsx","_blank")};return r.jsx("div",{className:"flex flex-col gap-4 p-5",children:r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsx(h,{type:"file",id:"file",label:"Pilih file",variant:"flat",radius:"md",color:"primary",accept:".csv, .xlsx, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, .xls",onChange:t=>{var e,i;m("file",((e=t.target.files)==null?void 0:e[0])??null),(i=t.target.files)!=null&&i[0]||s({title:"Error",description:"Silakan pilih file",color:"danger"})},isInvalid:!!l.file,errorMessage:l.file}),r.jsx(o,{color:"default",variant:"flat",size:"sm",onPress:()=>f(),children:"Download Template"}),r.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[r.jsx(o,{onPress:a,color:"default",children:"Batal"}),r.jsx(o,{type:"submit",color:"primary",isLoading:p,children:"Import"})]})]})})};export{k as default};
